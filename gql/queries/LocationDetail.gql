#import "~/gql/fragments/Image"
query LocationDetail($slug: [String!]) {
    entry(section: "location", slug: $slug) {
        ... on location_location_Entry {
            id
            locationType
            title
            heroImage {
                image {
                    ...Image
                }
            }
            summary
            email
            phoneNumber
            address {
                id
                addressLine1
                addressLine2
                addressCity
                addressState
                addressZipCode
                addressCountry
            }
            howToGetHere
            amenities(label: true)
            space {
                title
                summary
                reservationRequired
                mediatorEmail
                reservationUrl
                spaceType {
                    id
                    title
                }
                spaceAmenities {
                    id
                    title
                }
                associatedLocations {
                    id
                    to: slug
                    title
                }
            }
            resourceServiceWorkshop {
                id
                text: summary
                title
                slug
                uri
                researchGuideUrl
                type: serviceOrResourceType
            }
            campusMapId
            libcalLocationIdForHours
            staffMember {
                id
                email
                to: uri
            }

            ...FlexibleBlocksLocation
        }
    }
    associatedArticles: entries(
        section: "article"
        relatedToEntries: { section: "location", slug: $slug }
        orderBy: "dateUpdated desc"
        limit: 3
    ) {
        ... on article_article_Entry {
            id
            title
            associatedLocations {
                id
                title
            }
            to: slug
            heroImage {
                ... on heroImage_heroImage_BlockType {
                    id
                    image {
                        ...Image
                    }
                    altText
                }
            }

            authors: staffMember {
                id
                slug
                title
            }
            description: summary
            category: typeHandle
            date: dateUpdated
        }
    }
    associatedEndowments: entries(
        section: "endowments"
        relatedToEntries: { section: "location", slug: $slug }
    ) {
        ... on endowment_endowments_Entry {
            id
            uri
            title
            summary
            dateUpdated
            heroImage {
                ... on heroImage_heroImage_BlockType {
                    id
                    image {
                        ...Image
                    }
                }
            }
        }
    }
    # associatedEvents: entries(
    #     section: "event"
    #     relatedToEntries: { section: "location", slug: $slug }
    # ) {
    #     ... on event_event_Entry {
    #         id
    #         title
    #         id
    #         uri
    #         title
    #         summary
    #         dateUpdated
    #         heroImage {
    #             ... on heroImage_heroImage_BlockType {
    #                 id
    #                 image {
    #                     ...Image
    #                 }
    #             }
    #         }
    #         date {
    #             startDate
    #             endDate
    #         }
    #         seriesDate {
    #             startDate
    #             endDate
    #         }
    #         associatedLocations {
    #             id
    #             title
    #             to: uri
    #         }
    #     }
    # }
    associatedExhibitions: entries(
        section: "exhibition"
        relatedToEntries: { section: "location", slug: $slug }
    ) {
        ... on exhibition_exhibition_Entry {
            id
            title
            id
            uri
            title
            summary
            dateUpdated
            heroImage {
                ... on heroImage_heroImage_BlockType {
                    id
                    image {
                        ...Image
                    }
                }
            }
            date {
                startDate
                endDate
            }
            seriesDate {
                startDate
                endDate
            }
            associatedLocations {
                id
                title
                to: uri
            }
        }
    }
}

fragment FlexibleBlocksLocation on ElementInterface {
    blocks: defaultFpb {
        id
        typeHandle
        ...BlockDivider
        ...BlockPullQuote
        ...BlockRichText
        ...BlockMediaWithText
        ...BlockSimpleCards
        ...BlockCallToAction
    }
}

fragment BlockRichText on defaultFpb_richText_BlockType {
    richText
}

fragment BlockPullQuote on defaultFpb_pullQuote_BlockType {
    id
    pullQuote {
        ... on pullQuote_pullQuote_BlockType {
            text
            attribution
        }
    }
}

fragment BlockDivider on defaultFpb_divider_BlockType {
    id
    divider
}

fragment BlockMediaWithText on defaultFpb_mediaWithText_BlockType {
    id
    sectionTitle: titleGeneral
    sectionSummary: summary
    mediaWithText {
        ... on mediaWithText_mediaLink_BlockType {
            id
            titleLink
            description
            coverImage {
                ...Image
            }
            buttonText
            buttonUrl
            linkToMedia
            typeMedia
        }
        ... on mediaWithText_mediaUpload_BlockType {
            id
            titleUpload
            description
            buttonText
            buttonUrl
            coverImage {
                ...Image
            }
            upload {
                ...Image
            }
            typeMedia
        }
    }
}

fragment BlockSimpleCards on defaultFpb_simpleCards_BlockType {
    id
    sectionTitle: titleGeneral
    sectionSummary: summary
    cards: simpleCards {
        ... on simpleCards_internalServiceOrResource_BlockType {
            id
            title: titleGeneral
            summary
            contentLink {
                slug
                title
                summary
                researchGuideUrl
            }
        }
        ... on simpleCards_externalServiceOrResource_BlockType {
            id
            title: titleGeneral
            summary
            externalLink
        }
    }
}

fragment BlockCallToAction on defaultFpb_callToAction_BlockType {
    id
    callToAction {
        ... on callToAction_callToAction_BlockType {
            id
            titleCta
            summary
            icon
            buttonText
            buttonLink
            backgroundColor
        }
    }
}
