import{_ as K,u as X,k as Z,l as j,m as V,r as p,a as G,p as E,e as q,f as b,q as r,s as e,x as g,y as w,z as _,A as ee,B as ne,D as te,E as ae,F as B,G as f,t as ie,ak as se,v as le,ac as $,H as T,I,h as u,M as re,a1 as oe,S as de,T as ue}from"./D87QO4dW.js";import{u as me}from"./BWVOSsg_.js";import{_ as o}from"./I9wROFQL.js";import{c as x}from"./DSQ4ZnfI.js";import{f as P}from"./DJY1H8k3.js";import{r as ce}from"./Dim8bG2a.js";import{d as ve}from"./BIzRNX9S.js";var S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EndowmentsList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"listingEndowments",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"listingEndowments_listingEndowments_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"featuredEndowments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"titleGeneral"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sectionSummary"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"featuredEndowments_featuredEndowments_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"featuredEndowments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"endowment_endowments_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"to"},name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"alternativeName"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"languageAltName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"endowment",block:!1}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"StringValue",value:"title ASC",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"alternativeName"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"languageAltName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"altText"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"associatedLocations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"donors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"donors_donor_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:1877}};S.loc.source={body:`#import "../gql/fragments/Image.gql"

query EndowmentsList {
    entry(section: "listingEndowments") {
        ... on listingEndowments_listingEndowments_Entry {
            title

            text: summary
            featuredEndowments {
                titleGeneral
                sectionSummary
                ... on featuredEndowments_featuredEndowments_BlockType {
                    featuredEndowments {
                        ... on endowment_endowments_Entry {
                            sectionHandle
                            id
                            title
                            to: uri
                            text: summary
                            alternativeName {
                                languageAltName
                                fullName
                            }
                            heroImage {
                                ... on heroImage_heroImage_BlockType {
                                    id
                                    image {
                                        ...Image
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    entries(section: "endowment", orderBy: "title ASC") {
        title
        alternativeName {
            languageAltName
            fullName
        }
        summary
        uri
        heroImage {
            ... on heroImage_heroImage_BlockType {
                id
                image {
                    ...Image
                }
                altText
            }
        }
        associatedLocations {
            title
            uri
        }
        donors {
            ... on donors_donor_BlockType {
                firstName
                lastName
            }
        }
    }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var U={};function ge(n){return n.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;var s=a.name.value;return U[s]?!1:(U[s]=!0,!0)})}S.definitions=S.definitions.concat(ge(ve.definitions));function A(n,a){if(n.kind==="FragmentSpread")a.add(n.name.value);else if(n.kind==="VariableDefinition"){var s=n.type;s.kind==="NamedType"&&a.add(s.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(m){A(m,a)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(m){A(m,a)}),n.definitions&&n.definitions.forEach(function(m){A(m,a)})}var C={};(function(){S.definitions.forEach(function(a){if(a.name){var s=new Set;A(a,s),C[a.name.value]=s}})})();function O(n,a){for(var s=0;s<n.definitions.length;s++){var m=n.definitions[s];if(m.name&&m.name.value==a)return m}}function ke(n,a){var s={kind:n.kind,definitions:[O(n,a)]};n.hasOwnProperty("loc")&&(s.loc=n.loc);var m=C[a]||new Set,N=new Set,d=new Set;for(m.forEach(function(c){d.add(c)});d.size>0;){var k=d;d=new Set,k.forEach(function(c){if(!N.has(c)){N.add(c);var l=C[c]||new Set;l.forEach(function(F){d.add(F)})}})}return N.forEach(function(c){var l=O(n,c);l&&s.definitions.push(l)}),s}ke(S,"EndowmentsList");const z=n=>(de("data-v-4e147034"),n=n(),ue(),n),fe={id:"main",class:"page page-endowment-listing"},he={key:0,class:"about-results"},pe={key:1,class:"about-results"},ye={class:"error-text"},Se=z(()=>u("p",null,[T(" We can't find the term you are looking for on this page, but we're here to help. "),u("br"),T(" Try searching the whole site from "),u("a",{href:"https://library.ucla.edu"},"UCLA Library Home"),T(", or try one of the these regularly visited links: ")],-1)),Ne=z(()=>u("ul",null,[u("li",null,[u("a",{href:"https://www.library.ucla.edu/research-teaching-support/research-help"},"Research Help")]),u("li",null,[u("a",{href:"/help/services-resources/ask-us"},"Ask Us")]),u("li",null,[u("a",{href:"https://www.library.ucla.edu/use/access-privileges/disability-resources"},"Accessibility Resources")])],-1)),we={__name:"index",async setup(n){let a,s;const{$graphql:m,$dataApi:N}=X(),d=Z(),{data:k,error:c}=([a,s]=j(async()=>ee("endowments-list",async()=>({data:await m.default.request(S,{})}))),a=await a,s(),a);if(c.value)throw V({...c.value,statusMessage:"Page not found."+c.value,fatal:!0});if(!k.value.data.entry&&!k.value.data.entries)throw V({statusCode:404,message:"Page not found",fatal:!0});const l=p(o(k.value.data,"entry",{})),F=p(o(k.value.data,"entries",[])),R=p(o(k.value.data,"entry.featuredEndowments[0].featuredEndowments",[]));G(k,(t,i)=>{console.log("In watch preview enabled, newVal, oldVal",t,i),l.value=o(t.data,"entry",{}),F.value=o(t.data,"entries",[]),R.value=o(t.data,"entry.featuredEndowments[0].featuredEndowments",[])}),me({title:l.value?l.value.title:"... loading",meta:[{hid:"description",name:"description",content:ce(l.value.text)}]});const y=E(()=>R.value.map(t=>({...t,to:`/${t.to}`,image:o(t,"heroImage[0].image[0]",null),alternativeFullName:o(t,"alternativeName[0].fullName",null),language:o(t,"alternativeName[0].languageAltName",null)}))),L=E(()=>F.value.map(t=>({...t,jobPostingURL:`/${t.uri}`,associatedLocations:o(t,"associatedLocations",[]).map(i=>({...i,uri:P(i.uri)})),alternativeFullName:o(t,"alternativeName[0].fullName",null),language:o(t,"alternativeName[0].languageAltName",null)}))),M=E(()=>`Search ${l.value.title}`),Q=E(()=>Y(v.value)),v=p([]);p("");const h=p(!1),D=p({queryText:d.query.q||"",queryFilters:{}});G(()=>d.query,(t,i)=>{console.log("ES newVal, oldVal",t,i),D.value.queryText=d.query.q||"",W()},{deep:!0,immediate:!0});async function W(){if(d.query.q&&d.query.q!==""){console.log("Search ES HITS query,",d.query.q);const t=d.query.q||"*",i=await N.keywordSearchWithFilters(t,x.endowmentsList.searchFields,"sectionHandle:endowment",[],x.endowmentsList.sortField,x.endowmentsList.orderBy,x.endowmentsList.resultFields,[]);i&&i.hits&&i.hits.total.value>0?(console.log("Search ES HITS,",i.hits.hits),v.value=i.hits.hits,h.value=!1):(h.value=!0,v.value=[])}else v.value=[],h.value=!1}function Y(t=[]){return t.map(i=>({...i._source,jobPostingURL:`/${i._source.uri}`,image:o(i._source,"heroImage[0].image[0]",null),alternativeFullName:o(i._source,"alternativeName[0].fullName",null),language:o(i._source,"alternativeName[0].languageAltName",null),summary:o(i._source,"text",null),associatedLocations:o(i._source,"associatedLocations",[]).map(H=>({...H,uri:P(H.uri)}))}))}function J(t){ne().push({path:"/give/endowments",query:{q:t.text}})}return(t,i)=>(q(),b("main",fe,[r(e(te),{title:e(l).title,text:e(l).text},null,8,["title","text"]),r(e(ae),{"search-type":"about",class:"generic-search","search-generic-query":e(D),placeholder:e(M),onSearchReady:J},null,8,["search-generic-query","placeholder"]),r(e(f),{theme:"divider"},{default:g(()=>[r(e(B),{class:"search-margin",color:"about"})]),_:1}),w(r(e(f),{class:"section-no-top-margin","section-title":e(l).featuredEndowments[0].titleGeneral,"section-summary":e(l).featuredEndowments[0].sectionSummary},{default:g(()=>[e(y).length>0?(q(),ie(e(se),{key:0,class:"section",items:e(y)},null,8,["items"])):le("",!0)]),_:1},8,["section-title","section-summary"]),[[_,e(l)&&e(y)&&e(y).length&&e(v).length==0&&!e(h)]]),w(r(e(f),{theme:"divider"},{default:g(()=>[r(e(B),{color:"about"})]),_:1},512),[[_,e(l)&&e(y)&&e(y).length&&e(v).length==0&&!e(h)]]),w(r(e(f),{"section-title":"All Collection Endowments"},{default:g(()=>[r(e($),{items:e(L)},null,8,["items"])]),_:1},512),[[_,e(l)&&e(L)&&e(L).length&&e(v).length==0&&!e(h)]]),w(r(e(f),{class:"section-no-top-margin"},{default:g(()=>[e(d).query.q?(q(),b("h2",he,[T(" Displaying "+I(e(v).length)+" results for ",1),u("strong",null,[u("em",null,'"'+I(e(d).query.q)+'"',1)])])):(q(),b("h2",pe," Displaying "+I(e(v).length)+" results ",1)),r(e($),{items:e(Q)},null,8,["items"])]),_:1},512),[[_,e(v)&&e(v).length>0]]),w(r(e(f),null,{default:g(()=>[u("div",ye,[r(e(re),null,{default:g(()=>[u("h2",null,'Search for "'+I(e(d).query.q)+'" not found.',1),Se,Ne]),_:1})])]),_:1},512),[[_,e(h)]]),r(e(f),{theme:"divider"},{default:g(()=>[r(e(B),{color:"about"})]),_:1}),r(e(f),null,{default:g(()=>[r(e(oe),{"svg-name":"svg-call-to-action-money",title:"Give to the UCLA Library",text:"Your contributions help us build our collections for the benefit or our students, faculty, staff and the general public.",name:"Give Now",to:"/give"})]),_:1})]))}},Ae=K(we,[["__scopeId","data-v-4e147034"]]);export{Ae as default};
