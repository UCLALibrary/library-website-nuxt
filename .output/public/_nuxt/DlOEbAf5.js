import{_ as O,u as U,k as G,l as H,m as A,r as P,a as W,p as h,e as m,f as S,q as u,s as t,x as g,A as z,C as Q,Y,F as D,G as b,h as C,t as _,H as I,I as J,M as E,v as p,an as L,O as K,P as X,ao as Z,a1 as ee,am as te}from"./D87QO4dW.js";import{u as ne}from"./BWVOSsg_.js";import{_ as T}from"./I9wROFQL.js";import{r as ae}from"./Dim8bG2a.js";import{d as ie}from"./BIzRNX9S.js";import{d as se}from"./Dhr_5Jrk.js";import"./CL8yYu5A.js";import"./DeFtLck0.js";import"./CIf3dq7z.js";import"./Q2Lk47BP.js";import"./CLd6PcwS.js";import"./BEx1Bxtt.js";var v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EndowmentDetail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"endowment",block:!1}},{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"altText"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"alternativeName"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"alternativeName_alternativeName_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"languageAltName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"endowmentDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subjectAreas"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"donors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"donors_donor_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"to"},name:{kind:"Name",value:"donationUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"spakCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associatedLocations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"AllFpbWithNoBanner"},directives:[]}]}}]}}],loc:{start:0,end:801}};v.loc.source={body:`#import "../gql/fragments/Image.gql"
#import "../gql/fragments/collections/AllFpbWithNoBanner.gql"

query EndowmentDetail($slug: [String!]) {
  entry(section: "endowment", slug: $slug) {
    uri
    slug
    sectionHandle
    title
    text: summary
    heroImage {
      ... on heroImage_heroImage_BlockType {
        image {
          ...Image
        }
        altText
      }
    }
    alternativeName {
      ... on alternativeName_alternativeName_BlockType {
        languageAltName
        fullName
      }
    }
    endowmentDescription
    subjectAreas {
      title
    }
    donors {
      ... on donors_donor_BlockType {
        firstName
        lastName
      }
    }
    to: donationUrl
    spakCode
    associatedLocations {
      title
      uri
    }
    ...AllFpbWithNoBanner
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var $={};function B(n){return n.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;var i=a.name.value;return $[i]?!1:($[i]=!0,!0)})}v.definitions=v.definitions.concat(B(ie.definitions));v.definitions=v.definitions.concat(B(se.definitions));function w(n,a){if(n.kind==="FragmentSpread")a.add(n.name.value);else if(n.kind==="VariableDefinition"){var i=n.type;i.kind==="NamedType"&&a.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(l){w(l,a)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(l){w(l,a)}),n.definitions&&n.definitions.forEach(function(l){w(l,a)})}var F={};(function(){v.definitions.forEach(function(a){if(a.name){var i=new Set;w(a,i),F[a.name.value]=i}})})();function q(n,a){for(var i=0;i<n.definitions.length;i++){var l=n.definitions[i];if(l.name&&l.name.value==a)return l}}function oe(n,a){var i={kind:n.kind,definitions:[q(n,a)]};n.hasOwnProperty("loc")&&(i.loc=n.loc);var l=F[a]||new Set,k=new Set,d=new Set;for(l.forEach(function(e){d.add(e)});d.size>0;){var N=d;d=new Set,N.forEach(function(e){if(!k.has(e)){k.add(e);var f=F[e]||new Set;f.forEach(function(y){d.add(y)})}})}return k.forEach(function(e){var f=q(n,e);f&&i.definitions.push(f)}),i}oe(v,"EndowmentDetail");const le={id:"main",class:"page page-endowments-detail"},re={class:"description-with-image"},de={class:"description"},ue={key:2},ce={__name:"[slug]",async setup(n){let a,i;const{$graphql:l}=U(),k=G(),{data:d,error:N}=([a,i]=H(async()=>z(`endowment-detail-${k.params.slug}`,async()=>await l.default.request(v,{slug:k.params.slug}))),a=await a,i(),a);if(N.value)throw A({...N.value,statusMessage:"Page not found."+N.value,fatal:!0});if(!d.value.entry)throw A({statusCode:404,statusMessage:"Page Not Found",fatal:!0});d.value.entry.slug;const e=P(T(d.value,"entry",{}));W(d,(s,r)=>{console.log("In watch preview enabled, newVal, oldVal",s,r),e.value=T(s,"entry",{})}),ne({title:e.value?e.value.title:"... loading",meta:[{hid:"description",name:"description",content:ae(e.value.text)}]});const f=h(()=>{var s,r;return(s=e.value)!=null&&s.donors&&((r=e.value)==null?void 0:r.donors.length)>0?x(e.value.donors):""}),y=h(()=>e.value.associatedLocations.map(s=>({...s,to:`/${s.uri}`}))),j=h(()=>{if(e.value.subjectAreas[0].title){const s=e.value.subjectAreas[0].title;return`/give/endowments?q=&filters={subjectAreas.title.keyword:['${encodeURIComponent(s)}']}`}else return""}),V=h(()=>e.value.heroImage[0].image[0]),R=h(()=>`https://search.library.ucla.edu/discovery/search?query=lds04,contains,${e.value.spakCode},AND&tab=LibraryCatalog&search_scope=MyInstitution&vid=01UCS_LAL:UCLA&mode=advanced&offset=0`);function me(s){return s&&s.length>0?x(s):""}function x(s){const r=[];for(const o of s){let c="";o.firstName&&o.firstName!==""&&(!o.lastName||o.lastName==="")?c=o.firstName:o.firstName&&o.firstName!==""&&o.lastName&&o.lastName!==""?c=o.firstName+" "+o.lastName:c=o.lastName,c!==""&&r.push(c)}return r.length===1?`${r[0]}`:`${[r.slice(0,-1).join(", "),r.slice(-1)[0]].join(r.length<2?"":" and ")}`}return(s,r)=>{const o=te;return m(),S("main",le,[u(t(Q),{to:"/give/endowments",title:t(e).title,"parent-title":"Collection Endowments"},null,8,["title"]),u(t(Y),{title:t(e).title,text:t(e).text,"alternative-full-name":t(e).alternativeName&&t(e).alternativeName[0]&&t(e).alternativeName[0].fullName||"",language:t(e).alternativeName&&t(e).alternativeName[0]&&t(e).alternativeName[0].languageAltName||"","button-text":"Give Now",to:t(e).to},null,8,["title","text","alternative-full-name","language","to"]),u(t(b),{theme:"divider"},{default:g(()=>[u(t(D),{class:"divider",color:"about"})]),_:1}),u(t(b),null,{default:g(()=>[C("div",re,[C("div",de,[t(e).donors[0].lastName?(m(),_(t(E),{key:0,class:"donors"},{default:g(()=>[I(" Made possible by a gift from "+J(t(f)),1)]),_:1})):p("",!0),t(e).subjectAreas[0]?(m(),_(t(L),{key:1,class:"subject-area","icon-name":"svg-icon-book",text:t(e).subjectAreas[0].title,to:t(j)},null,8,["text","to"])):p("",!0),t(y).length>0?(m(),S("ul",ue,[(m(!0),S(K,null,X(t(y),(c,M)=>(m(),S("li",{key:`AssociatedLocation-${c}-${M}`},[u(t(L),{class:"associated-locations","icon-name":"svg-icon-location",text:c.title,to:c.to},null,8,["text","to"])]))),128))])):p("",!0),t(e).endowmentDescription?(m(),_(t(E),{key:3,class:"description-text","rich-text-content":t(e).endowmentDescription},null,8,["rich-text-content"])):p("",!0),t(e).spakCode?(m(),_(o,{key:4,class:"catalog-link",to:t(R)},{default:g(()=>[I(" See all items purchased through this Endowment ")]),_:1},8,["to"])):p("",!0)]),t(e).heroImage.length>0?(m(),_(t(Z),{key:0,media:t(V),class:"bookplate"},null,8,["media"])):p("",!0)])]),_:1}),u(t(b),{theme:"divider"},{default:g(()=>[u(t(D),{class:"divider",color:"about"})]),_:1}),u(t(b),null,{default:g(()=>[u(t(ee),{"svg-name":"svg-call-to-action-money",title:"Give to this endowment",text:"Your contributions help us build our collections for the benefit or our students, faculty, staff, and the general public.",name:"Donate",to:t(e).to},null,8,["to"])]),_:1})])}}},Fe=O(ce,[["__scopeId","data-v-c6058eb8"]]);export{Fe as default};
