import{_ as re,u as se,l as le,m as P,k as oe,r as N,a as z,p as f,L as ue,N as de,e as D,f as M,s as e,t as ce,v as me,q as u,x as k,y as w,z as _,A as ge,B as ve,D as fe,E as ke,F as B,G as y,ad as pe,ae as he,af as Q,H as C,I as E,h as m,M as ye,a1 as Se,S as Ne,T as we}from"./D87QO4dW.js";import{u as _e}from"./BWVOSsg_.js";import{_ as c}from"./I9wROFQL.js";import{r as Fe}from"./Dim8bG2a.js";import{p as R}from"./iHpIRGTP.js";import{d as qe}from"./BIzRNX9S.js";import{g as xe}from"./BIGQZk-7.js";import{c as S}from"./DSQ4ZnfI.js";import{q as Ie}from"./BOdCFMn0.js";import{f as W}from"./cwXK75ha.js";var x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ArticleList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"article",block:!1}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"StringValue",value:"postDate DESC",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"article_article_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"to"},name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalResourceUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"description"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"authors"},name:{kind:"Name",value:"staffMember"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"date"},name:{kind:"Name",value:"postDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"articleCategories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"entry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"listingNews",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"listingNews_listingNews_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"listingNews_listingNews_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"featuredNews"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"article_article_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"articleCategories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"to"},name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalResourceUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"postDate"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1215}};x.loc.source={body:`#import "../gql/fragments/Image.gql"

query ArticleList {
  entries(
    section: "article"
    orderBy: "postDate DESC"
  ) {
    ... on article_article_Entry {
      title
      to: uri
      externalResourceUrl
      heroImage {
        ... on heroImage_heroImage_BlockType {
          id
          image {
            ...Image
          }
        }
      }
      description: summary
      authors: staffMember {
        title
      }
      date: postDate
      articleCategories {
        id
        title
        uri
      }
    }
  }

  entry(section: "listingNews") {
    ... on listingNews_listingNews_Entry {
      title
      text: summary
      ... on listingNews_listingNews_Entry {
        featuredNews {
          ... on article_article_Entry {
            title
            articleCategories {
              id
              title
              uri
            }
            text: summary
            to: uri
            externalResourceUrl
            heroImage {
              ... on heroImage_heroImage_BlockType {
                id
                image {
                  ...Image
                }
              }
            }
            postDate
          }
        }
      }
    }
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var Y={};function De(i){return i.filter(function(l){if(l.kind!=="FragmentDefinition")return!0;var o=l.name.value;return Y[o]?!1:(Y[o]=!0,!0)})}x.definitions=x.definitions.concat(De(qe.definitions));function T(i,l){if(i.kind==="FragmentSpread")l.add(i.name.value);else if(i.kind==="VariableDefinition"){var o=i.type;o.kind==="NamedType"&&l.add(o.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(g){T(g,l)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(g){T(g,l)}),i.definitions&&i.definitions.forEach(function(g){T(g,l)})}var $={};(function(){x.definitions.forEach(function(l){if(l.name){var o=new Set;T(l,o),$[l.name.value]=o}})})();function J(i,l){for(var o=0;o<i.definitions.length;o++){var g=i.definitions[o];if(g.name&&g.name.value==l)return g}}function Ee(i,l){var o={kind:i.kind,definitions:[J(i,l)]};i.hasOwnProperty("loc")&&(o.loc=i.loc);var g=$[l]||new Set,F=new Set,v=new Set;for(g.forEach(function(r){v.add(r)});v.size>0;){var q=v;v=new Set,q.forEach(function(r){if(!F.has(r)){F.add(r);var s=$[r]||new Set;s.forEach(function(p){v.add(p)})}})}return F.forEach(function(r){var s=J(i,r);s&&o.definitions.push(s)}),o}Ee(x,"ArticleList");const K=i=>(Ne("data-v-b32b8dd1"),i=i(),we(),i),Re={id:"main",class:"page page-news"},Ce={key:0,class:"about-results"},Te={key:1,class:"about-results"},be={class:"error-text"},Ae=K(()=>m("p",null,[C(" We can’t find the term you are looking for on this page, but we're here to help. "),m("br"),C(" Try searching the whole site from "),m("a",{href:"https://library.ucla.edu"},"UCLA Library Home"),C(", or try one of the these regularly visited links: ")],-1)),Me=K(()=>m("ul",null,[m("li",null,[m("a",{href:"https://www.library.ucla.edu/research-teaching-support/research-help"},"Research Help")]),m("li",null,[m("a",{href:"/help/services-resources/ask-us"},"Ask Us")]),m("li",null,[m("a",{href:"https://www.library.ucla.edu/use/access-privileges/disability-resources"},"Accessibility Resources")])],-1)),Be={__name:"index",async setup(i){var L,O,G;let l,o;const{$graphql:g,$dataApi:F}=se(),{data:v,error:q}=([l,o]=le(async()=>ge("news",async()=>{const n=await g.default.request(x);return console.log("data in useasync for news listing: ",n),n})),l=await l,o(),l);if(console.log("data: ",v.value,"error: ",q.value),q.value)throw P({...q.value,statusMessage:"Page not found."+q.value,fatal:!0});if(!((L=v.value)!=null&&L.entry)&&!((O=v.value)!=null&&O.entries))throw P({statusCode:404,message:"Page not found",fatal:!0});const r=oe(),s=N(c(v.value,"entry",{})),p=N(c(v.value,"entries",[]));z(v,(n,t)=>{console.log("In watch preview enabled, newVal, oldVal",n,t),s.value=c(n,"entry",{}),p.value=c(n,"entries",[])}),_e({title:s.value?s.value.title:"... loading",meta:[{hid:"description",name:"description",content:Fe((G=s.value)==null?void 0:G.text)}]});const b=f(()=>{var n,t;return(t=(n=s.value)==null?void 0:n.featuredNews)==null?void 0:t.map(a=>({...a,to:a.externalResourceUrl!=null?c(a,"externalResourceUrl",""):`/${a.to}`,image:c(a,"heroImage[0].image[0]",null),category:c(a,"articleCategories[0].title",""),dateCreated:c(a,"postDate",""),byline:c(a,"articleStaff",[]),bylineOne:c(a,"articleStaff[0].title",""),bylineTwo:c(a,"postDate","")}))}),I=f(()=>b.value?b.value[0]:{}),H=f(()=>{var n;return(n=b.value)==null?void 0:n.slice(1,3).map(t=>({...t,bylineTwo:t.bylineTwo!=null?W(new Date(t.bylineTwo),"MMMM d, yyyy"):""}))});function V(n){if(!n||n.length===0)return"";let t="";return n.forEach(a=>{t=t+a.title+", "}),t.slice(0,-2)}const X=f(()=>{var n;return(n=p.value)==null?void 0:n.map(t=>({...t,to:t.externalResourceUrl!=null?c(t,"externalResourceUrl",""):`/${t.to}`,image:c(t,"heroImage[0].image[0]",null),staffName:t.fullName?`${t.fullName}`:null,category:V(t.articleCategories)}))});f(()=>{var n;return W(new Date((n=p.value)==null?void 0:n.postDate),"MMMM d, Y")});const Z=f(()=>{var t;return(((t=p.value)==null?void 0:t.contributors)||[]).map(a=>`${a.byline} ${a.title||a.staffMember[0].title}`).map(a=>a)}),d=N([]);N("");const h=N(!1),U=N([]),A=N({queryText:r.query.q||"",queryFilters:R(r.query.filters||"")});z(()=>r.query,(n,t)=>{console.log("ES newVal, oldVal",n,t),A.value.queryText=r.query.q||"",A.value.queryFilters=R(r.query.filters||""),j()},{deep:!0,immediate:!0});async function j(){if(r.query.q&&r.query.q!==""||r.query.filters&&Ie(R(r.query.filters||""),S.newsIndex.filters)){console.log("Search ES HITS query,",r.query.q);const n=r.query.q||"*",t=await F.keywordSearchWithFilters(n,S.newsIndex.searchFields,"sectionHandle:article",R(r.query.filters||""),S.newsIndex.sortField,S.newsIndex.orderBy,S.newsIndex.resultFields,S.newsIndex.filters);t&&t.hits&&t.hits.total.value>0?(console.log("Search ES HITS,",t.hits.hits),d.value=t.hits.hits,h.value=!1):(h.value=!0,d.value=[])}else d.value=[],h.value=!1}f(()=>d.length>1?`Displaying ${d.length} results`:`Displaying ${d.length} result`);const ee=f(()=>{var n;return`Search ${(n=s.value)==null?void 0:n.title}`}),te=f(()=>ne(d.value));function ne(n=[]){return n==null?void 0:n.map(t=>({...t._source,description:t._source.text,date:t._source.postDate,articleCategories:t._source.category,to:`/${t._source.uri}`,image:c(t._source,"heroImage[0].image[0]",null),staffName:t._source.fullName,category:V(t._source.category)}))}function ie(n){const t=[];if(n.filters)for(const a in n.filters)n.filters[a].length>0&&t.push(`${a}:(${n.filters[a].join(" OR ")})`);ve().push({path:"/about/news",query:{q:n.text,filters:t.join(" AND ")}})}async function ae(){const n=await F.getAggregations(S.newsIndex.filters,"article");U.value=xe(n,S.newsIndex.filters)}return ue(async()=>{console.log("onMounted called"),await ae()}),(n,t)=>{const a=de("DividerGeneral");return D(),M("main",Re,[e(s).title?(D(),ce(e(fe),{key:0,title:e(s).title,text:e(s).text},null,8,["title","text"])):me("",!0),u(e(ke),{"search-type":"about",filters:e(U),class:"generic-search","search-generic-query":e(A),placeholder:e(ee),onSearchReady:ie},null,8,["filters","search-generic-query","placeholder"]),u(e(y),{theme:"divider"},{default:k(()=>[u(e(B),{class:"search-margin"})]),_:1}),w(u(e(y),{class:"section-no-top-margin"},{default:k(()=>[u(e(pe),{media:e(I).image,title:e(I).title,breadcrumb:"Featured",byline:e(Z),description:e(I).text,"date-created":e(I).postDate,to:e(I).to,"align-right":!0,prompt:"Read More",class:"banner section-featured-banner"},null,8,["media","title","byline","description","date-created","to"]),w(u(a,null,null,512),[[_,e(s)&&e(s).featuredNews&&e(s).featuredNews.length&&e(d).length===0&&!e(h)]]),w(u(e(he),{class:"section",items:e(H)},null,8,["items"]),[[_,e(H).length>0]])]),_:1},512),[[_,e(s)&&e(s).featuredNews&&e(s).featuredNews.length>0&&e(d).length===0&&!e(h)]]),w(u(e(y),{theme:"divider"},{default:k(()=>[u(e(B),{color:"about"})]),_:1},512),[[_,e(s)&&e(s).featuredNews&&e(s).featuredNews.length>0&&e(d).length===0&&!e(h)]]),w(u(e(y),{"section-title":"All News"},{default:k(()=>[u(e(Q),{items:e(X)},null,8,["items"])]),_:1},512),[[_,e(p)&&e(p).length>0&&e(d).length===0&&!e(h)]]),w(u(e(y),{class:"section-no-top-margin"},{default:k(()=>[e(r).query.q?(D(),M("h2",Ce,[C(" Displaying "+E(e(d).length)+" results for ",1),m("strong",null,[m("em",null,"“"+E(e(r).query.q)+"”",1)])])):(D(),M("h2",Te," Displaying "+E(e(d).length)+" results ",1)),u(e(Q),{items:e(te)},null,8,["items"])]),_:1},512),[[_,e(d)&&e(d).length>0]]),w(u(e(y),{class:"section-no-top-margin"},{default:k(()=>[m("div",be,[u(e(ye),null,{default:k(()=>[m("h2",null,"Search for “"+E(e(r).query.q)+"” not found.",1),Ae,Me]),_:1})])]),_:1},512),[[_,e(h)]]),u(e(y),{theme:"divider"},{default:k(()=>[u(e(B),{color:"about"})]),_:1}),u(e(y),null,{default:k(()=>[u(e(Se),{class:"block-call-to-action","is-global":!0})]),_:1})])}}},We=re(Be,[["__scopeId","data-v-b32b8dd1"]]);export{We as default};
