import{_ as ne,u as te,k as se,l as re,m as W,r as f,a as z,p as b,L as le,e as H,f as R,q as l,s as e,x as g,y as I,z as q,A as de,B as oe,D as ue,E as ce,F as P,G as p,az as D,al as me,H as N,I as w,h as o,M as ve,a1 as fe,S as ke,T as ge}from"./D87QO4dW.js";import{u as pe}from"./BWVOSsg_.js";import{_ as k}from"./I9wROFQL.js";import{g as he}from"./BIGQZk-7.js";import{c as h}from"./DSQ4ZnfI.js";import{q as ye}from"./BOdCFMn0.js";import{p as A}from"./iHpIRGTP.js";import{r as Se}from"./Dim8bG2a.js";import{d as Le}from"./BIzRNX9S.js";function U(n){return n.address.map(a=>a.addressLine2?a.addressLine1+`
`+a.addressLine2+`
`+a.addressCity+", "+a.addressState+" "+a.addressZipCode:a?a.addressLine1+`
`+a.addressCity+", "+a.addressState+" "+a.addressZipCode:"")}function _e(n){return n.amenitiesIcons.map(a=>{const t=a.split("-")[1];return`Icon${t.charAt(0).toUpperCase()+t.slice(1)}`})}function V(n){return n.amenities.map((a,t)=>({title:a,icon:_e(n)[t]}))}var L={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"LocationsList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"listingLocationsHours",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"uclaLibraries"},name:{kind:"Name",value:"entries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"location",block:!1}},{kind:"Argument",name:{kind:"Name",value:"locationType"},value:{kind:"StringValue",value:"uclaLibrary",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"campusMapId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"libcalLocationIdForHours"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"address"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"address_addressFields_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressLine1"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressLine2"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressCity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressZipCode"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"libcalSpacesUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"amenities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"BooleanValue",value:!0}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"amenitiesIcons"},name:{kind:"Name",value:"amenities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"BooleanValue",value:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"affiliateLibraries"},name:{kind:"Name",value:"entries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"location",block:!1}},{kind:"Argument",name:{kind:"Name",value:"locationType"},value:{kind:"StringValue",value:"affiliateLibrary",block:!1}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"StringValue",value:"title ASC",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"campusMapId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"address"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"address_addressFields_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressLine1"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressLine2"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressCity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressZipCode"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"amenities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"BooleanValue",value:!0}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"amenitiesIcons"},name:{kind:"Name",value:"amenities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"BooleanValue",value:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"affiliateLibraryUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1611}};L.loc.source={body:`#import "../gql/fragments/Image.gql"
query LocationsList {
    entry(section: "listingLocationsHours") {
        title
        text: summary
    }
    uclaLibraries: entries(section: "location", locationType: "uclaLibrary") {
        sectionHandle
        campusMapId
        libcalLocationIdForHours
        title
        heroImage {
            ... on heroImage_heroImage_BlockType {
                id
                image {
                    ...Image
                }
            }
        }
        address {
            ... on address_addressFields_BlockType {
                addressLine1
                addressLine2
                addressCity
                addressState
                addressZipCode
            }
        }
        libcalSpacesUrl
        amenities(label: true)
        amenitiesIcons: amenities(label: false)
        uri
    }
    affiliateLibraries: entries(
        section: "location"
        locationType: "affiliateLibrary"
        orderBy: "title ASC"
    ) {
        sectionHandle
        campusMapId
        title
        slug
        heroImage {
            ... on heroImage_heroImage_BlockType {
                id
                image {
                    ...Image
                }
            }
        }
        address {
            ... on address_addressFields_BlockType {
                addressLine1
                addressLine2
                addressCity
                addressState
                addressZipCode
            }
        }
        amenities(label: true)
        amenitiesIcons: amenities(label: false)
        affiliateLibraryUrl
    }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var G={};function Ne(n){return n.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;var t=a.name.value;return G[t]?!1:(G[t]=!0,!0)})}L.definitions=L.definitions.concat(Ne(Le.definitions));function C(n,a){if(n.kind==="FragmentSpread")a.add(n.name.value);else if(n.kind==="VariableDefinition"){var t=n.type;t.kind==="NamedType"&&a.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(u){C(u,a)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(u){C(u,a)}),n.definitions&&n.definitions.forEach(function(u){C(u,a)})}var $={};(function(){L.definitions.forEach(function(a){if(a.name){var t=new Set;C(a,t),$[a.name.value]=t}})})();function Q(n,a){for(var t=0;t<n.definitions.length;t++){var u=n.definitions[t];if(u.name&&u.name.value==a)return u}}function Fe(n,a){var t={kind:n.kind,definitions:[Q(n,a)]};n.hasOwnProperty("loc")&&(t.loc=n.loc);var u=$[a]||new Set,y=new Set,r=new Set;for(u.forEach(function(v){r.add(v)});r.size>0;){var c=r;r=new Set,c.forEach(function(v){if(!y.has(v)){y.add(v);var d=$[v]||new Set;d.forEach(function(_){r.add(_)})}})}return y.forEach(function(v){var d=Q(n,v);d&&t.definitions.push(d)}),t}Fe(L,"LocationsList");const J=n=>(ke("data-v-f604a2e7"),n=n(),ge(),n),be={id:"main",class:"page page-location"},Ie={key:0,class:"about-results"},qe={key:1,class:"about-results"},we={class:"error-text"},Ae=J(()=>o("p",null,[N(" We can't find the term you are looking for on this page, but we're here to help. "),o("br"),N(" Try searching the whole site from "),o("a",{href:"https://library.ucla.edu"},"UCLA Library Home"),N(", or try one of the these regularly visited links: ")],-1)),Ce=J(()=>o("ul",null,[o("li",null,[o("a",{href:"https://www.library.ucla.edu/research-teaching-support/research-help"},"Research Help")]),o("li",null,[o("a",{href:"/help/services-resources/ask-us"},"Ask Us")]),o("li",null,[o("a",{href:"https://www.library.ucla.edu/use/access-privileges/disability-resources"},"Accessibility Resources")])],-1)),xe={__name:"index",async setup(n){var Z;let a,t;const{$graphql:u,$dataApi:y}=te(),r=se(),{data:c,error:v}=([a,t]=re(async()=>de("locations-list",async()=>await u.default.request(L))),a=await a,t(),a);if(v.value)throw W({statusCode:404,statusMessage:"Page not found.",fatal:!0});if(!c.value.entry)throw W({statusCode:404,statusMessage:"Page Not Found"});(Z=c==null?void 0:c.value)!=null&&Z.entry.affiliateLibraries&&c.value.entry.affiliateLibraries.length>0;const d=f(k(c.value,"entry",{})),_=f(k(c.value,"uclaLibraries",[])),x=f(k(c.value,"affiliateLibraries",[]));z(c,(i,s)=>{d.value=k(i,"entry",{}),_.value=k(i,"uclaLibraries",[]),x.value=k(i,"affiliateLibraries",[])});const T=f(!1),m=f([]);f("");const S=f(!1),M=f([]),B=f({queryText:r.query.q||"",queryFilters:A(r.query.filters||"")});async function K(){if(r.query.q&&r.query.q!==""||r.query.filters&&ye(A(r.query.filters||""),h.locationsList.filters)){const i=r.query.q||"*",s=await y.keywordSearchWithFilters(i,h.locationsList.searchFields,"sectionHandle:location OR sectionHandle:affiliateLibrary",A(r.query.filters||""),h.locationsList.sortField,h.locationsList.orderBy,h.locationsList.resultFields,[]);s&&s.hits&&s.hits.total.value>0?(m.value=s.hits.hits,S.value=!1):(S.value=!0,m.value=[])}else m.value=[],S.value=!1}z(()=>r.query,(i,s)=>{B.value.queryText=r.query.q||"",B.value.queryFilters=A(r.query.filters||""),K()},{deep:!0,immediate:!0}),pe({title:d.value?d.value.title:"... loading",meta:[{hid:"description",name:"description",content:Se(d.value.text)}]});const E=b(()=>_.value.map(i=>({...i,to:i.uri?`/${i.uri}`:null,image:k(i,"heroImage[0].image[0]",null),address:U(i)[0],addressLink:`https://map.ucla.edu/?id=${i.campusMapId}&e=true`,amenities:i.amenitiesIcons.length>0?V(i):null,isUclaLibrary:!0}))),O=b(()=>x.value.map(i=>({...i,to:i.affiliateLibraryUrl?i.affiliateLibraryUrl:null,image:k(i,"heroImage[0].image[0]",null),address:U(i)[0],addressLink:`https://map.ucla.edu/?id=${i.campusMapId}&e=true`,amenities:i.amenitiesIcons.length!==0?V(i):null,isUclaLibrary:!1}))),X=b(()=>`Search ${d.value.title}`),Y=b(()=>ie(m.value));function j(){T.value=!T.value}async function ee(){const i=await y.getAggregations(h.locationsList.filters,"location");console.log("Search Aggs Response: "+JSON.stringify(i)),M.value=he(i,h.locationsList.filters)}function ie(i=[]){return i==null?void 0:i.map(s=>({...s._source,to:s._source.locationType==="affiliateLibrary"?s._source.affiliateLibraryUrl:`/${s._source.uri}`,image:k(s._source,"heroImage[0].image[0]",null),address:U(s._source)[0],addressLink:`https://map.ucla.edu/?id=${s._source.campusMapId}&e=true`,amenities:s._source.amenitiesIcons.length!==0?V(s._source):null,isUclaLibrary:s._source.locationType!=="affiliateLibrary"}))}function ae(i){const s=[];if(i.filters)for(const F in i.filters)i.filters[F].length>0&&s.push(`${F}:(${i.filters[F].join(" OR ")})`);oe().push({path:"/visit/locations",query:{q:i.text,filters:s.join(" AND ")}})}return le(async()=>{await ee()}),(i,s)=>(H(),R("main",be,[l(e(ue),{title:e(d).title,text:e(d).text},null,8,["title","text"]),l(e(ce),{"search-type":"about",filters:e(M),class:"generic-search","search-generic-query":e(B),placeholder:e(X),onSearchReady:ae},null,8,["filters","search-generic-query","placeholder"]),l(e(p),{theme:"divider"},{default:g(()=>[l(e(P),{color:"visit",class:"search-margin"})]),_:1}),I(l(e(p),{class:"section-no-top-margin","section-title":"UCLA Library Locations"},{default:g(()=>[l(e(D),{class:"blockLocationListWrapper",items:e(E)},null,8,["items"]),l(e(me),{text:"See Other Campus Libraries & Archives",onClick:s[0]||(s[0]=F=>j())})]),_:1},512),[[q,e(d)&&e(_)&&e(E).length&&e(m).length==0&&!e(S)]]),I(l(e(p),{"section-title":"Other Campus Libraries & Archives"},{default:g(()=>[l(e(D),{class:"blockLocationListWrapper",items:e(O)},null,8,["items"])]),_:1},512),[[q,e(d)&&e(x)&&e(O).length&&e(T)&&e(m).length==0&&!e(S)]]),I(l(e(p),{class:"meta section-no-top-margin"},{default:g(()=>[e(r).query.q?(H(),R("h2",Ie,[N(" Displaying "+w(e(m).length)+" results for ",1),o("strong",null,[o("em",null,'"'+w(e(r).query.q),1)]),N('" ')])):(H(),R("h2",qe," Displaying "+w(e(m).length)+" results ",1)),l(e(D),{class:"blockLocationListWrapper",items:e(Y)},null,8,["items"])]),_:1},512),[[q,e(m)&&e(m).length>0]]),I(l(e(p),{class:"meta section-no-top-margin"},{default:g(()=>[o("div",we,[l(e(ve),null,{default:g(()=>[o("h2",null,'Search for "'+w(e(r).query.q)+'" not found.',1),Ae,Ce]),_:1})])]),_:1},512),[[q,e(S)]]),l(e(p),{theme:"divider"},{default:g(()=>[l(e(P),{class:"divider-way-finder",color:"visit"})]),_:1}),l(e(p),null,{default:g(()=>[l(e(fe),{class:"section block-call-to-action","is-global":!0})]),_:1})]))}},Ee=ne(xe,[["__scopeId","data-v-f604a2e7"]]);export{Ee as default};
