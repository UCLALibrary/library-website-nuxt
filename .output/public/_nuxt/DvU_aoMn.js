import{_ as A,u as E,k as T,l as $,m as N,r as S,a as C,L as R,e as f,f as V,q as v,s as e,t as p,v as k,x as w,A as P,C as B,Y as H,Z as L,G as x,F as M,ab as O,a2 as G,X as z}from"./D87QO4dW.js";import{u as Q}from"./BWVOSsg_.js";import{_ as F}from"./I9wROFQL.js";import{r as X}from"./Dim8bG2a.js";import{d as Y}from"./BIzRNX9S.js";import{d as Z}from"./BEHunIJq.js";import"./HCErRXQJ.js";import"./Cw_akS4-.js";import"./CL8yYu5A.js";import"./DeFtLck0.js";import"./CIf3dq7z.js";import"./Q2Lk47BP.js";import"./CLd6PcwS.js";import"./BEx1Bxtt.js";var o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PolicyDetail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"policy",block:!1}},{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"richText"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"to"},name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"AllFpb"},directives:[]}]}}]}}],loc:{start:0,end:509}};o.loc.source={body:`#import "../gql/fragments/Image.gql"
#import "../gql/fragments/collections/AllFpb.gql"

query PolicyDetail($slug: [String!]) {
    entry(section: "policy", slug: $slug) {
        id
        sectionHandle
        slug
        uri
        title
        text: summary
        richText
        to: uri
        heroImage {
            ... on heroImage_heroImage_BlockType {
                id
                image {
                    ...Image
                }
            }
        }
        ...AllFpb
    }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var I={};function q(i){return i.filter(function(t){if(t.kind!=="FragmentDefinition")return!0;var n=t.name.value;return I[n]?!1:(I[n]=!0,!0)})}o.definitions=o.definitions.concat(q(Y.definitions));o.definitions=o.definitions.concat(q(Z.definitions));function h(i,t){if(i.kind==="FragmentSpread")t.add(i.name.value);else if(i.kind==="VariableDefinition"){var n=i.type;n.kind==="NamedType"&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(r){h(r,t)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(r){h(r,t)}),i.definitions&&i.definitions.forEach(function(r){h(r,t)})}var _={};(function(){o.definitions.forEach(function(t){if(t.name){var n=new Set;h(t,n),_[t.name.value]=n}})})();function D(i,t){for(var n=0;n<i.definitions.length;n++){var r=i.definitions[n];if(r.name&&r.name.value==t)return r}}function j(i,t){var n={kind:i.kind,definitions:[D(i,t)]};i.hasOwnProperty("loc")&&(n.loc=i.loc);var r=_[t]||new Set,u=new Set,c=new Set;for(r.forEach(function(l){c.add(l)});c.size>0;){var d=c;c=new Set,d.forEach(function(l){if(!u.has(l)){u.add(l);var s=_[l]||new Set;s.forEach(function(m){c.add(m)})}})}return u.forEach(function(l){var s=D(i,l);s&&n.definitions.push(s)}),n}j(o,"PolicyDetail");const J={id:"main",class:"page page-general-content"},K={__name:"[slug]",async setup(i){let t,n;const{$graphql:r,$getHeaders:u,$elasticsearchplugin:c}=E(),d=T(),l=z(),{data:s,error:m}=([t,n]=$(async()=>P(`policy-detail-${d.params.slug}`,async()=>{if(d.params.slug==="report-problematic-content-and-description-in-uclas-library-collections-and-archives")redirect("https://ucla.libwizard.com/id/38f45c482a5fcb0b715a7e9e3ddee8b2");else if(d.params.slug==="toward-ethical-and-inclusive-descriptive-practices-in-ucla-library-special-collections")redirect(`${l.host}/about/policies/ethical-description`);else return await r.default.request(o,{slug:d.params.slug})})),t=await t,n(),t);if(m.value)throw N({...m.value,statusMessage:"Page not found."+m.value,fatal:!0});if(!s.value.entry)throw N({statusCode:404,statusMessage:"Page Not Found"});s.value.entry.slug;const a=S(F(s.value,"entry",{}));C(s,(g,b)=>{console.log("In watch preview enabled, newVal, oldVal",g,b),a.value=F(g,"entry",{})});const y=S([]);return Q({title:a.value?a.value.title:"... loading",meta:[{hid:"description",name:"description",content:X(a.value.text)}]}),R(()=>{y.value=u.getHeadersMethod()}),(g,b)=>(f(),V("main",J,[v(e(B),{to:"/about/policies",title:e(a).title,"parent-title":"Policies"},null,8,["title"]),e(a)&&(!e(a).heroImage||e(a).heroImage.length==0)?(f(),p(e(H),{key:0,class:"banner-text",category:e(a).format,title:e(a).title,text:e(a).text},null,8,["category","title","text"])):k("",!0),e(a)&&e(a).heroImage&&e(a).heroImage.length==1?(f(),p(e(x),{key:1,class:"section-banner"},{default:w(()=>[v(e(L),{media:e(a).heroImage[0].image[0],category:e(a).format,title:e(a).title,text:e(a).text},null,8,["media","category","title","text"])]),_:1})):k("",!0),v(e(x),{theme:"divider"},{default:w(()=>[v(e(M),{class:"divider-way-finder",color:"about"})]),_:1}),e(y).length>=3?(f(),p(e(O),{key:2,"section-titles":e(y)},null,8,["section-titles"])):k("",!0),e(a)?(f(),p(e(G),{key:3,class:"flexible-content",blocks:e(a).blocks},null,8,["blocks"])):k("",!0)]))}},me=A(K,[["__scopeId","data-v-b50ed2ed"]]);export{me as default};
