import{_ as X,u as Y,k as Z,l as j,m as V,r as p,a as L,p as N,L as ee,N as te,e as I,f as A,q as l,s as t,x as g,y as T,z as H,A as ie,B as ne,D as ae,E as se,F as $,G as k,ak as b,H as C,I as F,h as o,M as le,U as re,S as oe,T as ce}from"./D87QO4dW.js";import{u as ue}from"./BWVOSsg_.js";import{_ as f}from"./I9wROFQL.js";import{r as de}from"./Dim8bG2a.js";import{d as me}from"./BIzRNX9S.js";import{g as fe}from"./BIGQZk-7.js";import{c as v}from"./DSQ4ZnfI.js";import{q as ve}from"./BOdCFMn0.js";import{p as w}from"./iHpIRGTP.js";var S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExploreCollectionsList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"listingExploreCollections",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"listingExploreCollections_listingExploreCollections_Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associatedTopics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalResourceUrl"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"iconName"},name:{kind:"Name",value:"illustrationsResourcesAndServices"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section"},value:{kind:"StringValue",value:"collection",block:!1}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"StringValue",value:"postDate DESC",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sectionHandle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"text"},name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"category"},name:{kind:"Name",value:"physicalDigital"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"heroImage_heroImage_BlockType"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"},directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:843}};S.loc.source={body:`#import "../gql/fragments/Image.gql"

query ExploreCollectionsList {
    entry(section: "listingExploreCollections") {
        title
        summary
        ... on listingExploreCollections_listingExploreCollections_Entry {
            associatedTopics {
                title
                text: summary
                uri
                externalResourceUrl
                iconName: illustrationsResourcesAndServices
                sectionHandle
            }
        }
    }
    entries(section: "collection", orderBy: "postDate DESC") {
        title
        sectionHandle
        text: summary
        category: physicalDigital
        uri
        heroImage {
            ... on heroImage_heroImage_BlockType {
                id
                image {
                    ...Image
                }
            }
        }
    }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var O={};function pe(i){return i.filter(function(n){if(n.kind!=="FragmentDefinition")return!0;var s=n.name.value;return O[s]?!1:(O[s]=!0,!0)})}S.definitions=S.definitions.concat(pe(me.definitions));function E(i,n){if(i.kind==="FragmentSpread")n.add(i.name.value);else if(i.kind==="VariableDefinition"){var s=i.type;s.kind==="NamedType"&&n.add(s.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(c){E(c,n)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(c){E(c,n)}),i.definitions&&i.definitions.forEach(function(c){E(c,n)})}var U={};(function(){S.definitions.forEach(function(n){if(n.name){var s=new Set;E(n,s),U[n.name.value]=s}})})();function M(i,n){for(var s=0;s<i.definitions.length;s++){var c=i.definitions[s];if(c.name&&c.name.value==n)return c}}function ge(i,n){var s={kind:i.kind,definitions:[M(i,n)]};i.hasOwnProperty("loc")&&(s.loc=i.loc);var c=U[n]||new Set,h=new Set,a=new Set;for(c.forEach(function(d){a.add(d)});a.size>0;){var y=a;a=new Set,y.forEach(function(d){if(!h.has(d)){h.add(d);var r=U[d]||new Set;r.forEach(function(q){a.add(q)})}})}return h.forEach(function(d){var r=M(i,d);r&&s.definitions.push(r)}),s}ge(S,"ExploreCollectionsList");const P=i=>(oe("data-v-99e80fd8"),i=i(),ce(),i),he={id:"main",class:"page page-collections-explore"},ye={key:0,class:"about-results"},ke={key:1,class:"about-results"},Se={class:"error-text"},_e=P(()=>o("p",null,[C(" We can’t find the term you are looking for on this page, but we're here to help. "),o("br"),C(" Try searching the whole site from "),o("a",{href:"https://library.ucla.edu"},"UCLA Library Home"),C(", or try one of the these regularly visited links: ")],-1)),xe=P(()=>o("ul",null,[o("li",null,[o("a",{href:"https://www.library.ucla.edu/research-teaching-support/research-help"},"Research Help")]),o("li",null,[o("a",{href:"/help/services-resources/ask-us"},"Ask Us")]),o("li",null,[o("a",{href:"https://www.library.ucla.edu/use/access-privileges/disability-resources"},"Accessibility Resources")])],-1)),qe={__name:"index",async setup(i){let n,s;const{$graphql:c,$dataApi:h}=Y(),a=Z(),{data:y,error:d}=([n,s]=j(async()=>ie("collection",async()=>await c.default.request(S))),n=await n,s(),n);if(d.value)throw V({...d.value,statusMessage:"Page not found.",fatal:!0});if(!y.value.entry)throw V({statusCode:404,message:"Page not found",fatal:!0});const r=p(f(y.value,"entry",{})),q=p(f(y.value,"entries",[]));p(""),L(y,(e,u)=>{console.log("In watch preview enabled, newVal, oldVal",e,u),r.value=f(e,"entry",{}),q.value=f(e,"entries",[])}),ue({title:r.value?r.value.title:"... loading",meta:[{hid:"description",name:"description",content:de(r.value.summary)}]});const R=N(()=>q.value.map(e=>({...e,to:e.externalResourceUrl?e.externalResourceUrl:`/${e.uri}`,image:f(e,"heroImage[0]image[0]",null),category:e.category.join(", "),title:f(e,"title",""),text:f(e,"text","")}))),G=N(()=>r.value.associatedTopics.map(e=>({...e,to:e.externalResourceUrl?e.externalResourceUrl:`/${e.uri}`}))),m=p([]),_=p(!1),B=p([]),D=p({queryText:a.query.q||"",queryFilters:w(a.query.filters||"")});L(()=>a.query,(e,u)=>{console.log("ES newVal, oldVal",e,u),D.value.queryText=a.query.q||"",D.value.queryFilters=w(a.query.filters||""),Q()},{deep:!0,immediate:!0});async function Q(){if(a.query.q&&a.query.q!==""||a.query.filters&&ve(w(a.query.filters||""),v.exploreCollection.filters)){console.log("Search ES HITS query,",a.query.q);const e=a.query.q||"*",u=await h.keywordSearchWithFilters(e,v.exploreCollection.searchFields,"sectionHandle:collection",w(a.query.filters||""),v.exploreCollection.sortField,v.exploreCollection.orderBy,v.exploreCollection.resultFields,v.exploreCollection.filters);m.value=[],u&&u.hits&&u.hits.total.value>0?(console.log("Search ES HITS,",u.hits.hits),m.value=u.hits.hits,_.value=!1):(m.value=[],_.value=!0)}else m.value=[],_.value=!1}const z=N(()=>`Search ${r.value.title}`),W=N(()=>m.value.map(e=>({...e._source,to:e._source.externalResourceUrl?e._source.externalResourceUrl:`/${e._source.uri}`,image:f(e._source,"heroImage[0]image[0]",null),category:e._source.physicalDigital.join(", ")})));function J(e){console.log("On the page getsearchdata called");const u=[];for(const x in e.filters)e.filters[x].length>0&&u.push(`${x}:(${e.filters[x].join(" OR ")})`);ne().push({path:"/collections/explore",query:{q:e.text,filters:u.join(" AND ")}})}async function K(){const e=await h.getAggregations(v.exploreCollection.filters,"collection");B.value=fe(e,v.exploreCollection.filters)}return ee(async()=>{console.log("onMounted called"),await K()}),(e,u)=>{const x=te("NavBreadcrumb");return I(),A("main",he,[l(x,{to:"/collections",title:"Explore Featured Collections","parent-title":"Collections"}),l(t(ae),{title:t(r).title,text:t(r).summary},null,8,["title","text"]),l(t(se),{"search-type":"about",filters:t(B),class:"generic-search","search-generic-query":t(D),placeholder:t(z),onSearchReady:J},null,8,["filters","search-generic-query","placeholder"]),l(t(k),{theme:"divider"},{default:g(()=>[l(t($),{class:"search-margin"})]),_:1}),T(l(t(k),{class:"section-no-top-margin"},{default:g(()=>[l(t(b),{items:t(R)},null,8,["items"])]),_:1},512),[[H,t(r)&&t(R)&&t(R).length&&t(m).length==0&&!t(_)]]),T(l(t(k),{class:"section-no-top-margin"},{default:g(()=>[t(a).query.q?(I(),A("h2",ye,[C(" Displaying "+F(t(m).length)+" results for ",1),o("strong",null,[o("em",null,"“"+F(t(a).query.q)+"”",1)])])):(I(),A("h2",ke," Displaying "+F(t(m).length)+" results ",1)),l(t(b),{items:t(W)},null,8,["items"])]),_:1},512),[[H,t(m)&&t(m).length>0]]),T(l(t(k),{class:"section-no-top-margin"},{default:g(()=>[o("div",Se,[l(t(le),null,{default:g(()=>[o("h2",null,"Search for “"+F(t(a).query.q)+"” not found.",1),_e,xe]),_:1})])]),_:1},512),[[H,t(_)]]),l(t(k),null,{default:g(()=>[l(t($),{class:"divider-way-finder",color:"default"})]),_:1}),l(t(k),null,{default:g(()=>[l(t(re),{class:"section",items:t(G),"button-text":"All services & resources",to:"/help/services-resources","section-title":"Associated Topics"},null,8,["items"])]),_:1})])}}},Te=X(qe,[["__scopeId","data-v-99e80fd8"]]);export{Te as default};
